{% extends "nav_site.html" %}

<!-- Title -->
{% block title %}
    Lizenzen
{% endblock title %}

<!-- Content-->
{% block general_content %}
<div class="content">
    <h1>Heartbeats</h1>
    <em>Nicht erhalten: {{count_missing}}</em>
    <br><br>
    <table id="selectedColumn" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th class="th-sm">
                    Status
                </th>
                <th class="th-sm">
                    Standort
                </th>
                <th class="th-sm">
                    Produkt
                </th>
                <th class="th-sm">
                    Zuletzt erhalten
                </th>
            </tr>
        </thead>
        <tbody>
            {% for heartbeat in heartbeats %}
                <tr>
                    {% if heartbeat.received %}
                        <td>
                            <i class="fas fa-check-circle"></i>
                        </td>
                    {% else %}
                        <td>
                            <i class="fas fa-times-circle"></i>
                        </td>
                    {% endif %}
                    <td>
                        {{heartbeat.location}}
                    </td>
                    <td>
                        {{heartbeat.product}}
                    </td>
                    <td>
                        {{heartbeat.last_received}}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock general_content %}

{% block custom_js %}
<script>
    $(document).ready(function () {
        $('#selectedColumn').DataTable({
            "aaSorting": [],
                columnDefs: [{
                orderable : true,
                targets   : 3
            }]
        });
        $('.dataTables_length').addClass('bs-select');
    });
</script>
{% endblock custom_js %}
